<head>
  <!-- Numeric.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  
  <!-- Integrate inline, for copying over to BFGO <script src="BFGO-visualistions.1.js"></script> -->
</head>

<body>
  <!-- Revision 11 updated 31 Oct 17<br><br> -->
  
  <div id="outputbloom" style="pointer-events: none"></div>
  
  <script>
    
    // Columns fixed by table definition; 
    //Project Abbreviation,
    //Project Name,
    //People (currently unpopulated/not revealed/unimplemented)
    //Research Outputs (papers/datasets), 
    // In Person Engagements (trainings, conference presentations)
    //Remote/Distributed Engagement (press mentions)
    var columns = 5;
    
    //This array should be populated from BFGO data
    function BFGOoutputdata() {
      var outputdata = [
        ["TAMANI","TAMANI",530,4,5,0],
        ["ASUS","ASUS",1001210,4,2,0],
        ["CONNECT","CONNECT",0,0,1,0],
        ["RACArctic","RACArctic",310,2,3,0],
        ["ARCTIC-ERA","ARCTIC-ERA",130,2,1,0],
        ["BAAMRGP","BAAMRGP",630,5,4,0],
        ["COPERA","COPERA",1140,5,3,0],
        ["HIARC","HIARC",1230,3,3,0],
        ["Pan-Arctic Options","Pan-Arctic Options",1230,5,3,0]
      ];
      return outputdata;
    }


  var outputbloomdata = BFGOoutputdata();


// The number of projects in the CRA
  var projects = outputbloomdata.length;

   var projectlist = []
  for (var i = 1; i <projects; i++) {
    projectlist.push(outputbloomdata[i][1]);
  }
  if (projects < 4) {
    for (var i =projects; i <=4; i++){
      outputbloomdata.push([i, i, 0.1, 0.1, 0.1, 0.1]);
//      document.write(outputbloomdata.length + " <BR>");
    }
    projects = 4;
  }

  var rdata = [];
  var tdata = [];
  for (var i = 0; i < projects; i++){
    rdata[i] = outputbloomdata[i][3];
    tdata[i] = outputbloomdata[i][1];
//    document.write(projects + " "+rdata[i]+ " "+tdata[i] + "<BR>");
  }    
  var publications = {
  r: rdata,
  t: tdata,
  name: 'Publications and Datasets',
    hoverinfo: 'skip',
  marker: {color: 'rgb(0,85,104)'},
  type: 'area'
};

  var rdata = [];
  var tdata = [];
  for (var i = 0; i < projects; i++){
    rdata[i] = outputbloomdata[i][4];
    tdata[i] = outputbloomdata[i][1];
//    document.write(projects + " "+rdata[i]+ " "+tdata[i] + "<BR>");
  } 
var presentations = {
  r: rdata,
  t: tdata,
  name: 'Presentations and Trainings',
    hoverinfo: 'skip',
  marker: {color: 'rgb(9,130,144)'},
  type: 'area'
};
                                                    
    var rdata = [];
  var tdata = [];
  for (var i = 0; i < projects; i++){
    rdata[i] = Math.log(outputbloomdata[i][2]);
 //  rdata[i] = outputbloomdata[i][2];
    tdata[i] = outputbloomdata[i][1];
//    document.write(projects + " "+rdata[i]+ " "+tdata[i] + "<BR>");
  }                                                     
var audience = {
  r: rdata,
  t: tdata,
  name: 'Est. Audience Size (incl. Website)',
  marker: {color: 'rgb(75,181,197)'},
    hoverinfo: 'skip',
  type: 'area'
};
                                                    


var data = [publications, presentations, audience];

var layout = {
  title: ' ',
  font: {size: 12},
  legend: {font: {size: 6}},
  width: 800,
  height: 600,
  margin: {
    l: 30,
    r: 50,
    b: 1,
    t: 1,
    pad: 1
  },
  hoverinfo: 'skip',
   hovermode: false,
  barmode: "stack",
  hoverlabel: {
    bgcolor: 'rgb(75,181,197)'
  },
  
  legend: { traceorder: 'normal' },
  radialaxis: {
    visible: false, 
    showgrid: false,
    showline: false,
    zeroline: false,
    showspikes: false,
    ticks: ""
  },
  angularaxis: {
    type: 'category',
    visible: true, 
    showgrid: true,
    showticklabels: true,
    showline: false,
    zeroline: true,
    showspikes: true,
    ticks: "outside",
    tickmode: 'array',
    tickvals: projectlist,
    nticks: 30,
  },
  yaxis: {
    visible: false, 
    showgrid: false,
    showline: false,
    zeroline: false,
    showspikes: false,
    ticks: ""
  },
  xaxis: {
    visible: false, 
    showgrid: false,
    showline: false,
    zeroline: false,
    showspikes: false,
    ticks: ""
  },
  orientation: 270
};

Plotly.newPlot('outputbloom', data, layout);
  </script>
</body>
